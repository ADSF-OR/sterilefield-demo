<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SterileField - Medical Device Case Tracking</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Welcome Modal -->
    <div id="welcome" class="welcome-modal">
        <div class="welcome-box">
            <h2 class="welcome-title">Welcome to SterileField</h2>
            <p class="welcome-text">Medical device case tracking for seamless coordination between reps and schedulers.</p>

            <button class="role-btn primary" onclick="selectView('rep')">
                <div class="role-title">Rep View</div>
                <div class="role-desc">Track cases, manage time, view surgeon preferences</div>
            </button>

            <button class="role-btn" onclick="selectView('scheduler')">
                <div class="role-title">Scheduler View</div>
                <div class="role-desc">Schedule cases, manage surgeons, notify reps</div>
            </button>

            <div style="background: rgba(26,77,46,0.08); padding: 14px; border-radius: 10px; margin-top: 20px; border: 2px solid rgba(26,77,46,0.15);">
                <small style="color: #1f2937; line-height: 1.5;"><strong>Phase 1 MVP:</strong> Surgeon-centric workflow ‚Ä¢ Time tracking ‚Ä¢ Case management ‚Ä¢ No PHI</small>
            </div>
        </div>
    </div>

    <div class="header">
        <div>
            <div class="header-title">SterileField</div>
            <div class="header-subtitle" id="viewMode">Rep View</div>
            <div id="viewBadge" class="view-badge view-badge-rep">üë§ REP MODE</div>
        </div>
        <button class="switch-btn" onclick="showWelcome()">Switch View</button>
    </div>

    <!-- REP VIEW: Combined Surgeons & Cases Page -->
    <div id="repSurgeonList" class="content hidden">
        <h1 class="page-title">My Surgeons</h1>
        <p class="page-subtitle">South Jersey Territory</p>

        <div id="repSurgeonListContent"></div>
    </div>

    <!-- REP VIEW: Cases List (Chronological) -->
    <div id="repCasesList" class="content hidden">
        <h1 class="page-title">All Cases</h1>
        <p class="page-subtitle">Sorted by surgery date</p>

        <div class="tabs">
            <button class="tab active" onclick="filterCasesList('today')">Today</button>
            <button class="tab" onclick="filterCasesList('all')">All Cases</button>
            <button class="tab" onclick="filterCasesList('mine')">My Cases</button>
            <button class="tab" onclick="filterCasesList('unconfirmed')">Unconfirmed</button>
        </div>

        <div id="repCasesListContent"></div>
    </div>

    <!-- REP VIEW: Territory Tab -->
    <div id="repTerritory" class="content hidden">
        <h1 class="page-title">Territory Hospitals</h1>
        <p class="page-subtitle">All hospitals where cases can be performed</p>

        <div id="repTerritoryContent"></div>
    </div>

    <!-- REP VIEW: More Tab -->
    <div id="repMore" class="content hidden">
        <h1 class="page-title">More</h1>
        <p class="page-subtitle">Additional options</p>

        <div style="text-align: center; padding: 60px 20px; color: var(--gray-lighter);">
            <div style="font-size: 48px; margin-bottom: 16px;">‚öôÔ∏è</div>
            <div style="font-size: 16px;">Additional features coming soon</div>
        </div>
    </div>

    <!-- REP VIEW: Surgeon Detail Modal -->
    <div id="surgeonDetailModal" class="modal-overlay hidden" onclick="closeModal('surgeonDetailModal', event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="surgeonDetailName">Dr. Jennifer Thompson</h2>
                <button class="modal-close" onclick="closeModal('surgeonDetailModal')">‚úï</button>
            </div>

            <div id="surgeonDetailContent"></div>
        </div>
    </div>

    <!-- Case Time Entry Modal -->
    <div id="timeEntryModal" class="modal-overlay hidden" onclick="closeModal('timeEntryModal', event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="timeEntryCaseId">CASE-4721</h2>
                <button class="modal-close" onclick="closeModal('timeEntryModal')">‚úï</button>
            </div>

            <div id="timeEntryContent"></div>
        </div>
    </div>

    <!-- SCHEDULER VIEW: Surgeon List -->
    <div id="schedulerSurgeonList" class="content hidden">
        <h1 class="page-title">Manage Surgeons</h1>
        <p class="page-subtitle">Schedule cases and manage preferences</p>

        <div id="schedulerSurgeonListContent"></div>
    </div>

    <!-- SCHEDULER VIEW: Surgeon Detail -->
    <div id="schedulerSurgeonDetail" class="content hidden">
        <button class="btn btn-secondary" onclick="backToSchedulerList()">
            ‚Üê Back to Surgeons
        </button>

        <div id="schedulerDetailContent"></div>
    </div>

    <!-- Schedule Case Modal -->
    <div id="scheduleCaseModal" class="modal-overlay hidden" onclick="closeModal('scheduleCaseModal', event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title">Schedule New Case</h2>
                <button class="modal-close" onclick="closeModal('scheduleCaseModal')">‚úï</button>
            </div>

            <form id="scheduleCaseForm" onsubmit="submitCase(event)">
                <input type="hidden" id="caseEditId" value="">
                <input type="hidden" id="caseSurgeonId" value="">

                <div class="form-group">
                    <label class="form-label">Procedure *</label>
                    <input type="text" class="form-input" id="caseProcedure" placeholder="e.g., L4-L5 Posterior Fusion" required>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Date *</label>
                        <input type="date" class="form-input" id="caseDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Scheduled Start Time *</label>
                        <input type="time" class="form-input" id="caseTime" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Hospital *</label>
                    <select class="form-select" id="caseHospital" required>
                        <option value="">Select hospital...</option>
                        <option>Shore Medical Center</option>
                        <option>AtlantiCare Regional Medical Center</option>
                        <option>Cooper University Hospital</option>
                        <option>Virtua Voorhees Hospital</option>
                        <option>Inspira Medical Center Vineland</option>
                        <option>Kennedy University Hospital</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">OR Room</label>
                    <input type="text" class="form-input" id="caseRoom" placeholder="e.g., OR 2">
                </div>

                <div class="form-group">
                    <label class="form-label">Assigned Rep *</label>
                    <select class="form-select" id="caseRep" required>
                        <option value="">Select rep...</option>
                        <option value="rep1">John Smith</option>
                        <option value="rep2">Sarah Johnson</option>
                        <option value="rep3">Michael Chen</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Special Notes</label>
                    <textarea class="form-textarea" id="caseNotes" placeholder="Any special requirements or notes..."></textarea>
                </div>

                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        Schedule Case
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('scheduleCaseModal')">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Preferences Modal -->
    <div id="editPreferencesModal" class="modal-overlay hidden" onclick="closeModal('editPreferencesModal', event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="editPrefSurgeonName">Edit Preferences</h2>
                <button class="modal-close" onclick="closeModal('editPreferencesModal')">‚úï</button>
            </div>

            <form id="editPreferencesForm" onsubmit="savePreferences(event)">
                <input type="hidden" id="prefSurgeonId" value="">

                <div class="form-group">
                    <label class="form-label">General Preferences</label>
                    <textarea class="form-textarea" id="prefGeneral" placeholder="General workflow and preferences..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Implant Preferences</label>
                    <textarea class="form-textarea" id="prefImplants" placeholder="Preferred sizes, types, brands..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Technique Notes</label>
                    <textarea class="form-textarea" id="prefTechnique" placeholder="Surgical approach, positioning, special techniques..."></textarea>
                </div>

                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">
                        Save Preferences
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editPreferencesModal')">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="bottom-nav">
        <button id="navSurgeons" class="nav-btn active" onclick="navigate('surgeons')">
            <div class="nav-icon">üë•</div>
            <div class="nav-label">Surgeons</div>
        </button>
        <button id="navCases" class="nav-btn" onclick="navigate('cases')">
            <span id="casesNotificationBadge" class="notification-badge hidden">0</span>
            <div class="nav-icon">üìã</div>
            <div class="nav-label">Cases</div>
        </button>
        <button id="navTerritory" class="nav-btn" onclick="navigate('territory')">
            <div class="nav-icon">üìç</div>
            <div class="nav-label">Territory</div>
        </button>
        <button id="navMore" class="nav-btn" onclick="navigate('more')">
            <div class="nav-icon">‚ò∞</div>
            <div class="nav-label">More</div>
        </button>
    </div>

    <script type="module">
        import { initApp } from './src/js/app.js';
        window.addEventListener('DOMContentLoaded', () => {
            initApp();
        });
    </script>
</body>
</html>
